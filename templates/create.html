{% extends 'base.html' %}

{% block title %}创建投票{% endblock %}

{% block content %}
    <h2>创建新投票</h2>
    <form method="post">
        <div>
            <label for="question">投票问题：</label>
            <input type="text" id="question" name="question" required 
                   value="{{ question if question else '' }}">
        </div>
        
        <div>
            <label>选项：</label>
            <div id="options-container">
                {% if options %}
                    {% for option in options %}
                        <div>
                            <input type="text" name="options[]" value="{{ option }}" required>
                            {% if not loop.first %}
                                <button type="button" onclick="this.parentElement.remove()">删除</button>
                            {% endif %}
                        </div>
                    {% endfor %}
                {% else %}
                    <div><input type="text" name="options[]" required placeholder="选项1"></div>
                    <div><input type="text" name="options[]" required placeholder="选项2"></div>
                {% endif %}
            </div>
            <button type="button" onclick="addOption()" class="btn secondary">添加选项</button>
        </div>

        <button type="submit" class="btn primary">创建投票</button>
    </form>

    <script>
        const addOption = () => {
            const container = document.getElementById('options-container');
            const div = document.createElement('div');
            div.innerHTML = `
                <input type="text" name="options[]" required 
                       placeholder="选项${container.children.length + 1}">
                <button type="button" onclick="this.parentElement.remove()">删除</button>
            `;
            container.appendChild(div);
        };
    </script>
{% endblock %}