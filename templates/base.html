<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="{{ url_for('static', filename='icons/vote-icon.svg') }}" type="image/svg+xml">
    <title>{% block title %}{% endblock %} - Vote App</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script>
        // 加载FingerprintJS库
        !function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).FingerprintJS={})}(this,(function(t){"use strict";var e=function(){return(e=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function n(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))}function r(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function i(){return window.requestIdleCallback||window.setTimeout}function o(){return window.cancelIdleCallback||window.clearTimeout}function a(t){var e=i();return e((function(){t()}))}function s(){return n(this,void 0,void 0,(function(){var t;return r(this,(function(e){switch(e.label){case 0:return[4,new Promise((function(t){var e=document.createElement("canvas"),n=e.getContext("2d");if(!n)return t("");e.width=240,e.height=140,n.fillStyle="rgb(102, 204, 0)",n.fillRect(100,0,30,100),n.fillStyle="#f60",n.fillRect(100,0,30,100),n.fillStyle="rgb(120, 186, 176)",n.arc(80,80,50,0,2*Math.PI,!0),n.fillStyle="rgb(255,255,0)",n.arc(80,80,30,0,2*Math.PI,!0),n.fillStyle="rgb(255,0,255)",n.arc(80,80,10,0,2*Math.PI,!0),n.fillStyle="rgb(255,128,0)",n.arc(100,100,30,0,2*Math.PI,!0),t(e.toDataURL())}))];case 1:return t=e.sent(),[2,t]}}))}))}function c(){return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,s()];case 1:return[2,t.sent()]}}))}))}function u(){var t=screen;return[t.width,t.height,t.colorDepth].join("x")}function f(){var t=navigator,e=t.language||t.userLanguage||t.browserLanguage||t.systemLanguage;return e||""}function l(){var t=window;return[t.innerHeight,t.innerWidth,t.outerHeight,t.outerWidth].join("x")}function d(){var t=navigator,e=[t.platform,t.userAgent,t.vendor].join("###");return e}function h(){var t=new Date;return t.getTimezoneOffset()}function v(){var t=navigator;return t.hardwareConcurrency||""}function w(){var t=navigator;return t.deviceMemory||""}function g(){var t=navigator;return t.maxTouchPoints||""}function p(){return"ontouchstart"in window}function m(){return n(this,void 0,void 0,(function(){var t,n,i,o,a;return r(this,(function(r){switch(r.label){case 0:return t=u(),n=f(),i=l(),o=d(),a=h(),[4,c()];case 1:return[2,{screenResolution:t,language:n,windowSize:i,userAgent:o,timezoneOffset:a,canvas:r.sent(),cpuCores:v(),deviceMemory:w(),touchPoints:g(),touchSupport:p()}]}}))}))}function y(){return n(this,void 0,void 0,(function(){var t;return r(this,(function(e){switch(e.label){case 0:return[4,m()];case 1:return t=e.sent(),[2,btoa(JSON.stringify(t))]}}))}))}"undefined"!=typeof exports&&(exports.getFingerprint=y),t.getFingerprint=y,Object.defineProperty(t,"__esModule",{value:!0})}));
    </script>
    <script>
        // 获取浏览器指纹的全局函数
        async function getBrowserFingerprint() {
            try {
                return await FingerprintJS.getFingerprint();
            } catch (error) {
                console.error('获取浏览器指纹失败:', error);
                return null;
            }
        }
    </script>
</head>
<body>
    <nav class="main-nav">
        <div class="nav-container container">
            <div class="nav-brand">
                <a href="{{ url_for('index') }}" class="logo-link">
                    <img src="{{ url_for('static', filename='icons/vote-icon.svg') }}" 
                         alt="投票系统图标" 
                         class="nav-logo"
                         width="40" 
                         height="40">
                </a>
                <h1 class="site-title"><a href="{{ url_for('index') }}">投票系统</a></h1>
            </div>
            <ul class="nav-menu">
                <li class="nav-item"><a href="{{ url_for('index') }}" class="nav-link">首页</a></li>
                <li class="nav-item"><a href="{{ url_for('create') }}" class="nav-link">创建投票</a></li>
            </ul>
        </div>
    </nav>
    <main>
        <div class="container">
            {% with messages = get_flashed_messages() %}
                {% if messages %}
                    <div class="flash-messages">
                        {% for message in messages %}
                            <div class="flash-message">{{ message }}</div>
                        {% endfor %}
                    </div>
                {% endif %}
            {% endwith %}
            
            {% block content %}{% endblock %}
        </div>
    </main>
</body>
</html>